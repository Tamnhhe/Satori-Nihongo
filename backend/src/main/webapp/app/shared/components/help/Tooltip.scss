@import '../../../shared/design-system/tokens/variables.scss';

.tooltip-trigger {
  display: inline-block;
}

.tooltip {
  background: var(--color-surface-elevated);
  border: 1px solid var(--color-border-subtle);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-lg);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-relaxed);
  color: var(--color-text-primary);
  pointer-events: none;
  z-index: 9999;

  &__content {
    padding: var(--spacing-sm) var(--spacing-md);
    max-width: 100%;
    word-wrap: break-word;
  }

  &__arrow {
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;

    &--top {
      bottom: -6px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 6px 6px 0 6px;
      border-color: var(--color-surface-elevated) transparent transparent transparent;
    }

    &--bottom {
      top: -6px;
      left: 50%;
      transform: translateX(-50%);
      border-width: 0 6px 6px 6px;
      border-color: transparent transparent var(--color-surface-elevated) transparent;
    }

    &--left {
      right: -6px;
      top: 50%;
      transform: translateY(-50%);
      border-width: 6px 0 6px 6px;
      border-color: transparent transparent transparent var(--color-surface-elevated);
    }

    &--right {
      left: -6px;
      top: 50%;
      transform: translateY(-50%);
      border-width: 6px 6px 6px 0;
      border-color: transparent var(--color-surface-elevated) transparent transparent;
    }
  }

  // Variants
  &.help-tooltip {
    .tooltip__content {
      max-width: 250px;
      font-size: var(--font-size-xs);
    }
  }

  &.error-tooltip {
    background: var(--color-error-surface);
    border-color: var(--color-error-border);
    color: var(--color-error-text);

    .tooltip__arrow {
      &--top {
        border-color: var(--color-error-surface) transparent transparent transparent;
      }
      &--bottom {
        border-color: transparent transparent var(--color-error-surface) transparent;
      }
      &--left {
        border-color: transparent transparent transparent var(--color-error-surface);
      }
      &--right {
        border-color: transparent var(--color-error-surface) transparent transparent;
      }
    }
  }

  &.warning-tooltip {
    background: var(--color-warning-surface);
    border-color: var(--color-warning-border);
    color: var(--color-warning-text);

    .tooltip__arrow {
      &--top {
        border-color: var(--color-warning-surface) transparent transparent transparent;
      }
      &--bottom {
        border-color: transparent transparent var(--color-warning-surface) transparent;
      }
      &--left {
        border-color: transparent transparent transparent var(--color-warning-surface);
      }
      &--right {
        border-color: transparent var(--color-warning-surface) transparent transparent;
      }
    }
  }

  &.info-tooltip {
    background: var(--color-info-surface);
    border-color: var(--color-info-border);
    color: var(--color-info-text);

    .tooltip__arrow {
      &--top {
        border-color: var(--color-info-surface) transparent transparent transparent;
      }
      &--bottom {
        border-color: transparent transparent var(--color-info-surface) transparent;
      }
      &--left {
        border-color: transparent transparent transparent var(--color-info-surface);
      }
      &--right {
        border-color: transparent var(--color-info-surface) transparent transparent;
      }
    }
  }
}

// Dark theme support
[data-theme='dark'] {
  .tooltip {
    background: var(--color-surface-elevated-dark);
    border-color: var(--color-border-subtle-dark);
    color: var(--color-text-primary-dark);

    &__arrow {
      &--top {
        border-color: var(--color-surface-elevated-dark) transparent transparent transparent;
      }
      &--bottom {
        border-color: transparent transparent var(--color-surface-elevated-dark) transparent;
      }
      &--left {
        border-color: transparent transparent transparent var(--color-surface-elevated-dark);
      }
      &--right {
        border-color: transparent var(--color-surface-elevated-dark) transparent transparent;
      }
    }
  }
}

// Accessibility improvements
@media (prefers-reduced-motion: reduce) {
  .tooltip {
    transition: none;
  }
}

// High contrast mode
@media (prefers-contrast: high) {
  .tooltip {
    border-width: 2px;
    border-color: var(--color-text-primary);
  }
}
